# Generated by Django 4.2 on 2025-11-06 15:18

import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Achievement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('icon', models.CharField(help_text='Font Awesome icon class (e.g., fa-trophy)', max_length=50)),
                ('criteria_type', models.CharField(choices=[('orders', 'Total Orders'), ('spent', 'Total Amount Spent'), ('referrals', 'Referrals Made'), ('reviews', 'Reviews Given'), ('stamps', 'Stamps Collected')], max_length=50)),
                ('criteria_value', models.IntegerField(help_text='Value needed to unlock')),
                ('points_reward', models.IntegerField(default=0)),
                ('display_order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Achievement',
                'verbose_name_plural': 'Achievements',
                'ordering': ['display_order', 'criteria_value'],
            },
        ),
        migrations.CreateModel(
            name='CakeShape',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('base_price_per_kg', models.DecimalField(decimal_places=2, help_text='Base price per kilogram for this shape', max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('image', models.ImageField(blank=True, help_text='Image will be automatically resized to 400×400 pixels', null=True, upload_to='cake_shapes/')),
                ('is_active', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Cake Shape',
                'verbose_name_plural': 'Cake Shapes',
                'ordering': ['display_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='CakeTier',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('tiers_count', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)])),
                ('description', models.TextField(blank=True, null=True)),
                ('price_multiplier', models.DecimalField(decimal_places=2, default=1.0, help_text='Multiplier for pricing (e.g., 1-tier=1.0, 2-tier=1.8, 3-tier=2.5)', max_digits=5, validators=[django.core.validators.MinValueValidator(0.1)])),
                ('image', models.ImageField(blank=True, help_text='Image will be automatically resized to 400×400 pixels', null=True, upload_to='cake_tiers/')),
                ('is_active', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Cake Tier',
                'verbose_name_plural': 'Cake Tiers',
                'ordering': ['display_order', 'tiers_count'],
            },
        ),
        migrations.CreateModel(
            name='CarouselSlide',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(blank=True, help_text='Main heading for the slide', max_length=200, null=True)),
                ('subtitle', models.CharField(blank=True, help_text='Subheading or tagline (optional)', max_length=200, null=True)),
                ('description', models.TextField(blank=True, help_text='Description text for the slide', null=True)),
                ('image', models.ImageField(help_text='Image will be automatically resized to 1920×1080 pixels (Full HD)', upload_to='carousel/')),
                ('button_text', models.CharField(blank=True, default='Order Now', help_text='Text for the call-to-action button', max_length=50, null=True)),
                ('button_link', models.CharField(blank=True, default='/order/', help_text='URL for the button (e.g., /products/, /order/)', max_length=200, null=True)),
                ('display_order', models.IntegerField(default=0, help_text='Order of appearance (lower numbers appear first)')),
                ('is_active', models.BooleanField(default=True, help_text='Check to display this slide')),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, help_text='Leave blank for no end date', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Carousel Slide',
                'verbose_name_plural': 'Homepage Carousel',
                'ordering': ['display_order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('image', models.ImageField(blank=True, help_text='Optional. Image will be automatically resized to 500×281 pixels', null=True, upload_to='categories/')),
                ('is_active', models.BooleanField(default=True)),
                ('is_cake', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name_plural': 'Categories',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='CustomCakeOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order_number', models.CharField(editable=False, max_length=20, unique=True)),
                ('total_weight', models.DecimalField(decimal_places=2, help_text='Total weight in kg', max_digits=5, validators=[django.core.validators.MinValueValidator(0.1)])),
                ('flavor_description', models.CharField(blank=True, help_text='Custom flavor description if not using predefined flavors', max_length=200)),
                ('custom_flavor_price_per_kg', models.DecimalField(blank=True, decimal_places=2, help_text='Price per kg for custom flavor (set by admin if flavor not from list)', max_digits=10, null=True)),
                ('reference_image', models.ImageField(blank=True, help_text='Customer reference image (max 5MB)', null=True, upload_to='custom_orders/references/')),
                ('special_instructions', models.TextField(blank=True, help_text='Customer requirements, design details, color preferences, etc.')),
                ('custom_message', models.TextField(blank=True, help_text='Message to write on cake', null=True)),
                ('delivery_date', models.DateField()),
                ('delivery_time', models.TimeField(blank=True, null=True)),
                ('delivery_address', models.TextField()),
                ('estimated_price', models.DecimalField(decimal_places=2, help_text='Auto-calculated estimate shown to customer', max_digits=10)),
                ('final_price', models.DecimalField(blank=True, decimal_places=2, help_text='Final price set by owner (may differ from estimate)', max_digits=10, null=True)),
                ('price_note', models.TextField(blank=True, help_text='Explanation if final price differs from estimate', null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending Review'), ('quoted', 'Estimate Sent'), ('customer_approved', 'Customer Approved'), ('confirmed', 'Order Confirmed'), ('preparing', 'Preparing'), ('ready', 'Ready for Delivery'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('admin_notes', models.TextField(blank=True, help_text='Internal notes for preparation', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('confirmed_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Custom Cake Order',
                'verbose_name_plural': 'Custom Cake Orders',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Customer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('phone_number', models.CharField(max_length=15, unique=True)),
                ('whatsapp_number', models.CharField(blank=True, help_text='WhatsApp number for order communication (with country code, e.g., 919876543210)', max_length=15, null=True)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('address', models.TextField(blank=True, null=True)),
                ('date_of_birth', models.DateField(blank=True, help_text='Date of birth for birthday rewards', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Decoration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('price', models.DecimalField(decimal_places=2, help_text='Price per unit of this decoration (e.g., per flower, per figure)', max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('image', models.ImageField(blank=True, help_text='Image will be automatically resized to 300×300 pixels', null=True, upload_to='decorations/')),
                ('category', models.CharField(choices=[('flowers', 'Flowers'), ('fondant', 'Fondant Figures'), ('edible', 'Edible Decorations'), ('topping', 'Toppings'), ('other', 'Other')], default='other', max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Decoration',
                'verbose_name_plural': 'Decorations',
                'ordering': ['category', 'display_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Enquiry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('phone', models.CharField(max_length=15)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('message', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('is_responded', models.BooleanField(default=False)),
                ('response', models.TextField(blank=True, null=True)),
            ],
            options={
                'verbose_name_plural': 'Enquiries',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Event',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('event_name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('icon', models.CharField(blank=True, max_length=50, null=True)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'ordering': ['event_name'],
            },
        ),
        migrations.CreateModel(
            name='Flavor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('price_per_kg', models.DecimalField(decimal_places=2, help_text='Additional price per kg for this flavor (base price is from shape)', max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('is_active', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Flavor',
                'verbose_name_plural': 'Flavors',
                'ordering': ['display_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='GiftBox',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('main_image', models.ImageField(help_text='Image will be automatically resized to 500×281 pixels', upload_to='gift_boxes/')),
                ('pricing_type', models.CharField(choices=[('fixed', 'Fixed Price'), ('calculated', 'Sum of Items'), ('discounted', 'Sum with Discount')], default='calculated', help_text='How to calculate the price of this gift box', max_length=20)),
                ('fixed_price', models.DecimalField(blank=True, decimal_places=2, help_text='Fixed price (only for Fixed Price type)', max_digits=10, null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('discount_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Discount % (only for Sum with Discount type)', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('is_active', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0, help_text='Order of display (lower numbers first)')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Gift Box',
                'verbose_name_plural': 'Gift Boxes',
                'ordering': ['display_order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Ingredient',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('current_quantity', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('unit', models.CharField(choices=[('kg', 'Kilogram'), ('g', 'Gram'), ('l', 'Liter'), ('ml', 'Milliliter'), ('pcs', 'Pieces'), ('dozen', 'Dozen'), ('packet', 'Packet')], max_length=20)),
                ('reorder_level', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('notes', models.TextField(blank=True, null=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='LoyaltyCard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('card_number', models.CharField(editable=False, max_length=20, unique=True)),
                ('tier', models.CharField(choices=[('bronze', 'Bronze'), ('silver', 'Silver'), ('gold', 'Gold'), ('platinum', 'Platinum')], default='bronze', max_length=20)),
                ('current_stamps', models.IntegerField(default=0, help_text='Current stamps collected (resets after reward)')),
                ('total_stamps', models.IntegerField(default=0, help_text='Lifetime total stamps')),
                ('stamps_to_reward', models.IntegerField(default=5, help_text='Stamps needed for next reward')),
                ('points_balance', models.IntegerField(default=0, help_text='Current redeemable points')),
                ('lifetime_points', models.IntegerField(default=0, help_text='Total points earned ever')),
                ('total_orders', models.IntegerField(default=0)),
                ('total_spent', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('rewards_claimed', models.IntegerField(default=0)),
                ('referrals_made', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('joined_date', models.DateTimeField(auto_now_add=True)),
                ('last_activity', models.DateTimeField(auto_now=True)),
                ('customer', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='loyalty_card', to='admin_app.customer')),
            ],
            options={
                'verbose_name': 'Loyalty Card',
                'verbose_name_plural': 'Loyalty Cards',
                'ordering': ['-total_stamps'],
            },
        ),
        migrations.CreateModel(
            name='OfferBanner',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(help_text='Offer title (e.g., "20% Off Wedding Cakes")', max_length=200)),
                ('description', models.TextField(help_text='Offer details and terms')),
                ('image', models.ImageField(help_text='Image will be automatically resized to 800×400 pixels', upload_to='offers/')),
                ('discount_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Discount percentage (e.g., 10, 20, 25)', max_digits=5, null=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_active', models.BooleanField(default=True, help_text='Check to display this offer')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Promotional Offer',
                'verbose_name_plural': 'Promotional Offers',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order_number', models.CharField(editable=False, max_length=20, unique=True)),
                ('quantity', models.PositiveIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)])),
                ('custom_message', models.TextField(blank=True, null=True)),
                ('special_instructions', models.TextField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('confirmed', 'Confirmed'), ('preparing', 'Preparing'), ('ready', 'Ready for Pickup/Delivery'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('delivery_date', models.DateField()),
                ('delivery_time', models.TimeField(blank=True, null=True)),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('total_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='admin_app.customer')),
                ('event', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='admin_app.event')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('main_image', models.ImageField(help_text='Image will be automatically resized to 500×281 pixels for best display', upload_to='products/')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='products', to='admin_app.category')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PurchaseBill',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('supplier_name', models.CharField(max_length=200)),
                ('date', models.DateField(default=django.utils.timezone.now)),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('notes', models.TextField(blank=True, null=True)),
                ('bill_upload', models.FileField(blank=True, null=True, upload_to='purchase_bills/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='Subcategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('image', models.ImageField(blank=True, help_text='Optional. Image will be automatically resized to 500×281 pixels', null=True, upload_to='subcategories/')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subcategories', to='admin_app.category')),
            ],
            options={
                'verbose_name_plural': 'Subcategories',
                'ordering': ['name'],
                'unique_together': {('category', 'name')},
            },
        ),
        migrations.CreateModel(
            name='Size',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('weight_in_kg', models.DecimalField(decimal_places=2, default=1.0, help_text='Weight in kilograms (e.g., 0.5, 1.0, 2.0)', max_digits=5, validators=[django.core.validators.MinValueValidator(0)])),
                ('display_order', models.IntegerField(default=0, help_text='Order of display (lower numbers first)')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('categories', models.ManyToManyField(blank=True, related_name='sizes', to='admin_app.category')),
            ],
            options={
                'ordering': ['display_order', 'weight_in_kg'],
            },
        ),
        migrations.CreateModel(
            name='Review',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('customer_name', models.CharField(max_length=200)),
                ('rating', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('comment', models.TextField()),
                ('is_approved', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviews', to='admin_app.product')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Referral',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('referred_phone', models.CharField(max_length=15)),
                ('referred_name', models.CharField(blank=True, max_length=200)),
                ('referral_code', models.CharField(editable=False, max_length=20, unique=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('completed', 'Completed'), ('rewarded', 'Rewarded')], default='pending', max_length=20)),
                ('referrer_reward_points', models.IntegerField(default=100)),
                ('referred_reward_discount', models.DecimalField(decimal_places=2, default=10.0, max_digits=5)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('referred_customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='referred_by', to='admin_app.customer')),
                ('referrer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='referrals_made', to='admin_app.customer')),
            ],
            options={
                'verbose_name': 'Referral',
                'verbose_name_plural': 'Referrals',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductImage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(help_text='Image will be automatically resized to 500×281 pixels', upload_to='products/additional/')),
                ('caption', models.CharField(blank=True, max_length=200, null=True)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='additional_images', to='admin_app.product')),
            ],
        ),
        migrations.AddField(
            model_name='product',
            name='sizes',
            field=models.ManyToManyField(related_name='products', to='admin_app.size'),
        ),
        migrations.AddField(
            model_name='product',
            name='subcategory',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='products', to='admin_app.subcategory'),
        ),
        migrations.CreateModel(
            name='PointsTransaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('points', models.IntegerField()),
                ('transaction_type', models.CharField(choices=[('earned', 'Points Earned'), ('redeemed', 'Points Redeemed'), ('expired', 'Points Expired'), ('adjusted', 'Manual Adjustment')], max_length=20)),
                ('reason', models.CharField(max_length=255)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('loyalty_card', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='admin_app.loyaltycard')),
                ('order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='admin_app.order')),
            ],
            options={
                'verbose_name': 'Points Transaction',
                'verbose_name_plural': 'Points Transactions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='order',
            name='product',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='admin_app.product'),
        ),
        migrations.AddField(
            model_name='order',
            name='size',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='admin_app.size'),
        ),
        migrations.CreateModel(
            name='LoyaltyReward',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('reward_type', models.CharField(choices=[('stamp_card', 'Stamp Card Completion'), ('birthday', 'Birthday Reward'), ('referral', 'Referral Bonus'), ('milestone', 'Milestone Achievement'), ('special', 'Special Promotion'), ('points', 'Points Redemption')], max_length=20)),
                ('discount_percentage', models.DecimalField(decimal_places=2, help_text='Discount percentage (e.g., 10.00 for 10%)', max_digits=5)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, help_text='Fixed discount amount (if applicable)', max_digits=10)),
                ('issued_date', models.DateTimeField(auto_now_add=True)),
                ('expiry_date', models.DateField()),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('active', 'Active'), ('used', 'Used'), ('expired', 'Expired')], default='active', max_length=20)),
                ('used_date', models.DateTimeField(blank=True, null=True)),
                ('description', models.TextField(blank=True)),
                ('loyalty_card', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='rewards', to='admin_app.loyaltycard')),
                ('used_on_order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reward_used', to='admin_app.order')),
            ],
            options={
                'verbose_name': 'Loyalty Reward',
                'verbose_name_plural': 'Loyalty Rewards',
                'ordering': ['-issued_date'],
            },
        ),
        migrations.CreateModel(
            name='GiftBoxOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order_number', models.CharField(editable=False, max_length=20, unique=True)),
                ('quantity', models.PositiveIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)])),
                ('special_instructions', models.TextField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('confirmed', 'Confirmed'), ('preparing', 'Preparing'), ('ready', 'Ready for Pickup/Delivery'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('delivery_date', models.DateField()),
                ('delivery_time', models.TimeField(blank=True, null=True)),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('total_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gift_box_orders', to='admin_app.customer')),
                ('event', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='admin_app.event')),
                ('gift_box', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='admin_app.giftbox')),
            ],
            options={
                'verbose_name': 'Gift Box Order',
                'verbose_name_plural': 'Gift Box Orders',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Gallery',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(help_text='Image will be automatically resized to 500×281 pixels', upload_to='gallery/')),
                ('caption', models.CharField(blank=True, max_length=200, null=True)),
                ('is_featured', models.BooleanField(default=False)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('event_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='gallery_images', to='admin_app.event')),
            ],
            options={
                'verbose_name_plural': 'Gallery',
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='EventSuggestion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('suggested_item', models.CharField(max_length=200)),
                ('note', models.TextField(blank=True, null=True)),
                ('event', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='suggestions', to='admin_app.event')),
            ],
        ),
        migrations.CreateModel(
            name='CustomCakeReferenceImage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(help_text='Reference image (max 5MB)', upload_to='custom_orders/references/')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('custom_order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reference_images', to='admin_app.customcakeorder')),
            ],
            options={
                'ordering': ['uploaded_at'],
            },
        ),
        migrations.AddField(
            model_name='customcakeorder',
            name='customer',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='custom_orders', to='admin_app.customer'),
        ),
        migrations.AddField(
            model_name='customcakeorder',
            name='event',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='admin_app.event'),
        ),
        migrations.AddField(
            model_name='customcakeorder',
            name='flavor',
            field=models.ForeignKey(blank=True, help_text='Selected flavor for the cake', null=True, on_delete=django.db.models.deletion.PROTECT, to='admin_app.flavor'),
        ),
        migrations.AddField(
            model_name='customcakeorder',
            name='product',
            field=models.ForeignKey(blank=True, help_text='If customer selected an existing product for flavor', null=True, on_delete=django.db.models.deletion.PROTECT, to='admin_app.product'),
        ),
        migrations.AddField(
            model_name='customcakeorder',
            name='shape',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='admin_app.cakeshape'),
        ),
        migrations.AddField(
            model_name='customcakeorder',
            name='size',
            field=models.ForeignKey(blank=True, help_text='Size if product was selected', null=True, on_delete=django.db.models.deletion.PROTECT, to='admin_app.size'),
        ),
        migrations.AddField(
            model_name='customcakeorder',
            name='tier',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='admin_app.caketier'),
        ),
        migrations.CreateModel(
            name='ProductPrice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('price', models.DecimalField(decimal_places=2, help_text='Price for this specific product and size combination', max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prices', to='admin_app.product')),
                ('size', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_prices', to='admin_app.size')),
            ],
            options={
                'verbose_name': 'Product Price',
                'verbose_name_plural': 'Product Prices',
                'ordering': ['product', 'size__display_order'],
                'unique_together': {('product', 'size')},
            },
        ),
        migrations.CreateModel(
            name='GiftBoxItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity', models.PositiveIntegerField(default=1, help_text='Quantity of this product in the gift box', validators=[django.core.validators.MinValueValidator(1)])),
                ('display_order', models.IntegerField(default=0, help_text='Order of display')),
                ('gift_box', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='admin_app.giftbox')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='admin_app.product')),
                ('size', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='admin_app.size')),
            ],
            options={
                'verbose_name': 'Gift Box Item',
                'verbose_name_plural': 'Gift Box Items',
                'ordering': ['display_order', 'product__name'],
                'unique_together': {('gift_box', 'product', 'size')},
            },
        ),
        migrations.CreateModel(
            name='CustomerAchievement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('unlocked_at', models.DateTimeField(auto_now_add=True)),
                ('is_viewed', models.BooleanField(default=False)),
                ('achievement', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='admin_app.achievement')),
                ('loyalty_card', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='achievements', to='admin_app.loyaltycard')),
            ],
            options={
                'verbose_name': 'Customer Achievement',
                'verbose_name_plural': 'Customer Achievements',
                'ordering': ['-unlocked_at'],
                'unique_together': {('loyalty_card', 'achievement')},
            },
        ),
        migrations.CreateModel(
            name='CustomCakeOrderDecoration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity', models.PositiveIntegerField(default=1, help_text='Number of units (e.g., 5 flowers, 2 figures)', validators=[django.core.validators.MinValueValidator(1)])),
                ('custom_order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='order_decorations', to='admin_app.customcakeorder')),
                ('decoration', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='admin_app.decoration')),
            ],
            options={
                'verbose_name': 'Custom Order Decoration',
                'verbose_name_plural': 'Custom Order Decorations',
                'unique_together': {('custom_order', 'decoration')},
            },
        ),
    ]
